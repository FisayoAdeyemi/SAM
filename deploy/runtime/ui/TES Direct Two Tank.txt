TES Direct Two Tank
912
333
21
GroupBox

1
8
Name
5
9
GroupBox1
X
3
6
Y
3
105
Width
3
900
Height
3
221
Tool Tip
5
0
Caption
5
16
Two Tank Storage
Bold
2
1
Numeric

1
17
Name
5
5
Q_tes
X
3
279
Y
3
123
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
23
TES_COPY_T_htf_cold_des
X
3
657
Y
3
63
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
22
TES_COPY_T_htf_hot_des
X
3
657
Y
3
36
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
20
TES_COPY_q_pb_design
X
3
279
Y
3
36
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
16
TES_COPY_tshours
X
3
279
Y
3
63
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
14
cold_tank_Thtr
X
3
684
Y
3
195
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
6
Numeric

1
17
Name
5
18
cold_tank_max_heat
X
3
684
Y
3
219
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
7
Numeric

1
17
Name
5
6
h_tank
X
3
279
Y
3
171
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
Numeric

1
17
Name
5
10
h_tank_min
X
3
279
Y
3
195
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2
Numeric

1
17
Name
5
13
hot_tank_Thtr
X
3
684
Y
3
243
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
Numeric

1
17
Name
5
17
hot_tank_max_heat
X
3
684
Y
3
267
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
9
GroupBox

1
8
Name
5
8
object 4
X
3
6
Y
3
12
Width
3
900
Height
3
87
Tool Tip
5
0
Caption
5
24
System Design Parameters
Bold
2
1
Numeric

1
17
Name
5
13
q_dot_tes_est
X
3
684
Y
3
171
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
10
tank_pairs
X
3
279
Y
3
243
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
Numeric

1
17
Name
5
13
tes_avail_vol
X
3
279
Y
3
147
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
tes_htf_density
X
3
684
Y
3
291
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
24
tes_init_hot_htf_percent
X
3
684
Y
3
123
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Numeric

1
17
Name
5
17
tes_tank_diameter
X
3
279
Y
3
267
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Numeric

1
17
Name
5
13
tes_vol_total
X
3
279
Y
3
222
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
Numeric

1
17
Name
5
6
u_tank
X
3
684
Y
3
147
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
5

19
Q_tes
3
1
TES thermal capacity
MWt-hr
Thermal Energy Storage
0
8
1
1
1
1
0
Default
TES_COPY_T_htf_cold_des
3
1
HTF cold temperature
°C
Thermal Energy Storage
0
8
1
1
1
1
0
Default
TES_COPY_T_htf_hot_des
3
1
HTF hot temperature
°C
Thermal Energy Storage
0
8
1
1
1
1
0
Default
TES_COPY_q_pb_design
3
1
Cycle thermal power
MWt
Thermal Energy Storage
0
8
1
1
1
1
0
Default
TES_COPY_tshours
3
1
Hours of storage at power cycle full load
hours
Thermal Energy Storage
0
8
1
1
1
1
0
Default
cold_tank_Thtr
3
1
Cold tank heater temperature set point
°C
Thermal Energy Storage
0
2
1
1
1
1
280
Default
cold_tank_max_heat
3
1
Cold tank heater capacity
MWe
Thermal Energy Storage
0
2
1
1
1
1
15
Default
h_tank
3
1
Tank height
m
Thermal Energy Storage
0
2
1
1
1
1
20.9065
Default
h_tank_min
3
1
Tank fluid minimum height
m
Thermal Energy Storage
0
2
1
1
1
1
1
Default
hot_tank_Thtr
3
1
Hot tank heater temperature set point
°C
Thermal Energy Storage
0
2
1
1
1
1
500
Default
hot_tank_max_heat
3
1
Hot tank heater capacity
MWe
Thermal Energy Storage
0
2
1
1
1
1
30
Default
q_dot_tes_est
3
1
Estimated heat loss
MWt
Thermal Energy Storage
0
8
1
1
1
1
0
Default
tank_pairs
3
1
Parallel tank pairs
 
Thermal Energy Storage
0
2
1
1
1
1
1
Default
tes_avail_vol
3
1
Available HTF volume
m³
Thermal Energy Storage
0
8
1
1
1
1
0
Default
tes_htf_density
3
1
HTF density
kg/m³
Thermal Energy Storage
0
8
1
1
1
1
0
Default
tes_init_hot_htf_percent
3
1
Initial hot HTF percent
%
Thermal Energy Storage
0
2
1
1
1
1
30
Default
tes_tank_diameter
3
1
Tank diameter
m
Thermal Energy Storage
0
8
1
1
1
1
20
Default
tes_vol_total
3
1
Total HTF Volume
m³
Thermal Energy Storage
0
8
1
1
1
1
0
Numeric
u_tank
3
1
Wetted loss coefficient
Wt/m²-K
Thermal Energy Storage
0
2
1
1
1
1
1.2
Default

6505
equations{ '$MIMO$ ui_etes_tes__etes_cmod' } = define()
{
	obj = ssc_create();
	ssc_var(obj, "sim_type", 2);
	
	ssc_var(obj, "adjust:constant", ${adjust}{'constant'});
	
	ssc_var(obj, "solar_resource_file", ${solar_resource_file});
	
	ssc_var(obj, "T_htf_cold_des", ${T_htf_cold_des});
	ssc_var(obj, "T_htf_hot_des", ${T_htf_hot_des});
	ssc_var(obj, "P_ref", ${P_ref});
	ssc_var(obj, "design_eff", ${design_eff});
	ssc_var(obj, "tshours", ${tshours});
	ssc_var(obj, "heater_mult", ${heater_mult});
	ssc_var(obj, "gross_net_conversion_factor", ${gross_net_conversion_factor});
	
	ssc_var(obj, "pc_config", ${pc_config});
	ssc_var(obj, "pb_pump_coef", ${pb_pump_coef});
	ssc_var(obj, "startup_time", ${startup_time});                  
	ssc_var(obj, "startup_frac", ${startup_frac});
	ssc_var(obj, "cycle_max_frac", ${cycle_max_frac});
	ssc_var(obj, "cycle_cutoff_frac", ${cycle_cutoff_frac});
	ssc_var(obj, "q_sby_frac", ${q_sby_frac});

	ssc_var(obj, "dT_cw_ref", ${dT_cw_ref});       
	ssc_var(obj, "T_amb_des", ${T_amb_des});         
	ssc_var(obj, "P_boil", ${P_boil});         
	ssc_var(obj, "CT", ${CT});               
	ssc_var(obj, "T_approach", ${T_approach});                    
	ssc_var(obj, "T_ITD_des", ${T_ITD_des});       
	ssc_var(obj, "P_cond_ratio", ${P_cond_ratio});         
	ssc_var(obj, "pb_bd_frac", ${pb_bd_frac});   
	ssc_var(obj, "P_cond_min", ${P_cond_min});       
	ssc_var(obj, "n_pl_inc", ${n_pl_inc});       
	ssc_var(obj, "tech_type", ${tech_type});           

	ssc_var(obj, "ud_f_W_dot_cool_des", ${ud_f_W_dot_cool_des});         
	ssc_var(obj, "ud_m_dot_water_cool_des", ${ud_m_dot_water_cool_des});
	ssc_var(obj, "ud_ind_od", ${ud_ind_od});

	ssc_var(obj, "hot_htf_code", ${hot_htf_code});         
	ssc_var(obj, "ud_hot_htf_props", ${ud_hot_htf_props});   
	ssc_var(obj, "tes_init_hot_htf_percent", ${tes_init_hot_htf_percent});
	ssc_var(obj, "h_tank", ${h_tank});
	ssc_var(obj, "cold_tank_max_heat", ${cold_tank_max_heat});
	ssc_var(obj, "u_tank", ${u_tank});
	ssc_var(obj, "tank_pairs", ${tank_pairs});               
	ssc_var(obj, "cold_tank_Thtr", ${cold_tank_Thtr});       
	ssc_var(obj, "h_tank_min", ${h_tank_min});
	ssc_var(obj, "hot_tank_Thtr", ${hot_tank_Thtr});       
	ssc_var(obj, "hot_tank_max_heat", ${hot_tank_max_heat}); 

	ssc_var(obj, "is_dispatch", ${is_dispatch});

	ssc_var(obj, "pb_fixed_par", ${pb_fixed_par});     
	ssc_var(obj, "bop_par", ${bop_par});   
	ssc_var(obj, "bop_par_f", ${bop_par_f});             
	ssc_var(obj, "bop_par_0", ${bop_par_0});         
	ssc_var(obj, "bop_par_1", ${bop_par_1});         
	ssc_var(obj, "bop_par_2", ${bop_par_2});         

	ssc_var(obj, "ppa_multiplier_model", ${ppa_multiplier_model});         
	ssc_var(obj, "dispatch_factors_ts", ${dispatch_factors_ts});
	ssc_var(obj, "dispatch_sched_weekday", ${dispatch_sched_weekday});
	ssc_var(obj, "dispatch_sched_weekend", ${dispatch_sched_weekend});
	ssc_var(obj, "dispatch_factor1", ${dispatch_factor1});
	ssc_var(obj, "dispatch_factor2", ${dispatch_factor2});
	ssc_var(obj, "dispatch_factor3", ${dispatch_factor3});
	ssc_var(obj, "dispatch_factor4", ${dispatch_factor4});
	ssc_var(obj, "dispatch_factor5", ${dispatch_factor5});
	ssc_var(obj, "dispatch_factor6", ${dispatch_factor6});
	ssc_var(obj, "dispatch_factor7", ${dispatch_factor7});
	ssc_var(obj, "dispatch_factor8", ${dispatch_factor8});
	ssc_var(obj, "dispatch_factor9", ${dispatch_factor9}); 

	ssc_var(obj, "cycle_spec_cost", ${cycle_spec_cost});
	ssc_var(obj, "tes_spec_cost", ${tes_spec_cost});
	ssc_var(obj, "heater_spec_cost", ${heater_spec_cost});     
	ssc_var(obj, "bop_spec_cost", ${bop_spec_cost});
	ssc_var(obj, "contingency_rate", ${contingency_rate}); 
	ssc_var(obj, "sales_tax_frac", ${sales_tax_frac});
	ssc_var(obj, "epc_cost_perc_of_direct", ${epc_cost_perc_of_direct});
	ssc_var(obj, "epc_cost_per_watt", ${epc_cost_per_watt});
	ssc_var(obj, "epc_cost_fixed", ${epc_cost_fixed});
	ssc_var(obj, "land_cost_perc_of_direct", ${land_cost_perc_of_direct});
	ssc_var(obj, "land_cost_per_watt", ${land_cost_per_watt});
	ssc_var(obj, "land_cost_fixed", ${land_cost_fixed});

	ssc_var(obj, "sales_tax_rate", ${sales_tax_rate});

	ssc_var(obj, "const_per_interest_rate1", ${const_per_interest_rate1});    
	ssc_var(obj, "const_per_interest_rate2", ${const_per_interest_rate2});
	ssc_var(obj, "const_per_interest_rate3", ${const_per_interest_rate3});
	ssc_var(obj, "const_per_interest_rate4", ${const_per_interest_rate4});
	ssc_var(obj, "const_per_interest_rate5", ${const_per_interest_rate5});
	ssc_var(obj, "const_per_months1", ${const_per_months1});
	ssc_var(obj, "const_per_months2", ${const_per_months2});
	ssc_var(obj, "const_per_months3", ${const_per_months3});
	ssc_var(obj, "const_per_months4", ${const_per_months4});
	ssc_var(obj, "const_per_months5", ${const_per_months5});
	ssc_var(obj, "const_per_percent1", ${const_per_percent1});
	ssc_var(obj, "const_per_percent2", ${const_per_percent2});
	ssc_var(obj, "const_per_percent3", ${const_per_percent3});
	ssc_var(obj, "const_per_percent4", ${const_per_percent4});
	ssc_var(obj, "const_per_percent5", ${const_per_percent5});
	ssc_var(obj, "const_per_upfront_rate1", ${const_per_upfront_rate1});       
	ssc_var(obj, "const_per_upfront_rate2", ${const_per_upfront_rate2});       
	ssc_var(obj, "const_per_upfront_rate3", ${const_per_upfront_rate3});       
	ssc_var(obj, "const_per_upfront_rate4", ${const_per_upfront_rate4});       
	ssc_var(obj, "const_per_upfront_rate5", ${const_per_upfront_rate5});       

	//ret_d = ssc_dump(obj, 'etes_system_des_mimo.txt');

	ret = ssc_exec(obj, 'etes_electric_resistance');

	if(ret==0) {
		${Q_tes} = ssc_var(obj, "Q_tes_des");
		${tes_avail_vol} = ssc_var(obj, "V_tes_htf_avail");
		${tes_vol_total} = ssc_var(obj, "V_tes_htf_total");
		${tes_tank_diameter} = ssc_var(obj, "d_tank_tes");
		${q_dot_tes_est} = ssc_var(obj, "q_dot_loss_tes_des");
		${tes_htf_density} = ssc_var(obj, "dens_store_htf_at_T_ave");
	}
	else {
		vf = -789;
		${Q_tes} = vf;
		${tes_vol_avail} = vf;
		${tes_vol_total} = vf;
		${tes_tank_diameter} = vf;
		${q_dot_tes_est} = vf;
		${tes_htf_density} = vf;
	}
	
	ssc_free( obj );
};

// Set System Design Parameters copied from MSPT System Design
equations{ 'TES_COPY_q_pb_design' } = define(){
	return ${q_pb_design}; };

equations{ 'TES_COPY_tshours' } = define(){
	return ${tshours}; };

equations{ 'TES_COPY_T_htf_hot_des' } = define(){
	return ${T_htf_hot_des}; };
	
equations{ 'TES_COPY_T_htf_cold_des' } = define(){
	return ${T_htf_cold_des}; };








57
on_load{"TES Direct Two Tank"} = define() {
	return;
};

